{% extends "article/base.html" %}
{% load static %}
{% block title %}
article list
{% endblock %}
{% block content %}
{% with total_likes=article.users_like.count users_like=article.users_like.all %}

<div>
    <header>
        <h1>{{article.title}}</h1>
        <p>作者：<a href="{% url 'article:author_articles' article.author.username %}">{{user.username}}</a></p>
    </header>
</div>
<link rel="stylesheet" href="{% static 'editor/css/editormd.preview.css' %}">
<div id="editormd-view">
    <textarea name="" id="append-test" style="display:none">
        {{ article.body }}
    </textarea>

</div>

<script src="{% static "js/jquery-3.3.1.min.js" %}"></script>
<script src="{% static "editor/lib/marked.min.js" %}"></script>
<script src="{% static "editor/lib/prettify.min.js" %}"></script>
<script src="{% static "editor/lib/raphael.min.js" %}"></script>
<script src="{% static "editor/lib/underscore.min.js" %}"></script>
<script src="{% static "editor/lib/sequence-diagram.min.js" %}"></script>
<script src="{% static "editor/lib/flowchart.min.js" %}"></script>
<script src="{% static "editor/lib/jquery.flowchart.min.js" %}"></script>
<script src="{% static "editor/editormd.js" %}"></script>

<script >
$(function(){
    editormd.markdownToHTML("editormd-view", {
        htmlDecode:"style,script,iframe",
        emoji:true,
        taskList:true,
        tex:true,
        flowChart:true,
        sequenceDiagram:true,
    });
});
</script>

{% endblock %}